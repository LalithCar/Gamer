<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slot Machine Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .slot {
            font-size: 2rem;
            margin: 10px;
        }
        .hidden {
            display: none;
        }
        .login-container {
            margin-top: 50px;
        }
    </style>
</head>
<body>
    <h1>Welcome to the Slot Machine Game!</h1>

    <!-- Login Form -->
    <div id="login-container" class="login-container">
        <h2>Please log in with Google</h2>
        <button id="google-sign-in-btn">Log In with Google</button>
        <p id="login-error" style="color: red; display: none;">Login failed. Please try again.</p>
    </div>

    <!-- Slot Machine Game (hidden initially) -->
    <div id="game-container" class="hidden">
        <div class="slot" id="slot1">üçí</div>
        <div class="slot" id="slot2">üçã</div>
        <div class="slot" id="slot3">üçä</div>
        <br>
        <button id="spinBtn">Spin</button>
        <p id="result"></p>
        <br>
        <button id="playAgainBtn" style="display:none;">Play Again</button>
    </div>

    <!-- Firebase Config and Scripts -->
    <script type="module">
        // Import the functions you need from the Firebase SDK
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-analytics.js";

        // Your Firebase configuration (replace with your actual Firebase credentials)
        const firebaseConfig = {
            apiKey: "AIzaSyAMbkIMtbqEP7wunVMrq7A0aYabUTQe5cg",
            authDomain: "gamer-9907b.firebaseapp.com",
            projectId: "gamer-9907b",
            storageBucket: "gamer-9907b.firebasestorage.app",
            messagingSenderId: "860341931432",
            appId: "1:860341931432:web:dbf282da7be184fc0d619d",
            measurementId: "G-M91X3MP9GH"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        // Function to handle Google login
        function googleSignIn() {
            signInWithPopup(auth, provider)
                .then((result) => {
                    const user = result.user;
                    // Hide login container and show game container
                    document.getElementById('login-container').classList.add('hidden');
                    document.getElementById('game-container').classList.remove('hidden');
                    console.log("Logged in as:", user.displayName);
                })
                .catch((error) => {
                    console.error("Login failed:", error);
                    document.getElementById('login-error').style.display = 'inline';
                });
        }

        // Event listener for Google Sign-In button
        document.getElementById('google-sign-in-btn').addEventListener('click', googleSignIn);

        // Slot machine game logic
        const symbols = ["üçí", "üçã", "üçä", "üçâ", "‚≠ê", "7Ô∏è‚É£"];
        function spinSlots() {
            return [
                symbols[Math.floor(Math.random() * symbols.length)],
                symbols[Math.floor(Math.random() * symbols.length)],
                symbols[Math.floor(Math.random() * symbols.length)]
            ];
        }

        function checkWin(spinResult) {
            return new Set(spinResult).size === 1;
        }

        function playGame() {
            const spinResult = spinSlots();
            document.getElementById('slot1').textContent = spinResult[0];
            document.getElementById('slot2').textContent = spinResult[1];
            document.getElementById('slot3').textContent = spinResult[2];

            const resultMessage = checkWin(spinResult) ? "You win! All symbols match!" : "Sorry, no win. Better luck next time!";
            document.getElementById('result').textContent = resultMessage;

            document.getElementById('spinBtn').style.display = 'none';
            document.getElementById('playAgainBtn').style.display = 'inline-block';
        }

        // Event listeners for the slot machine buttons
        document.getElementById('spinBtn').addEventListener('click', playGame);
        document.getElementById('playAgainBtn').addEventListener('click', function() {
            document.getElementById('spinBtn').style.display = 'inline-block';
            document.getElementById('playAgainBtn').style.display = 'none';
            document.getElementById('result').textContent = '';
        });
    </script>
</body>
</html>
